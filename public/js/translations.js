// Translations for the Quiz App
const translations = {
  uz: {
    // Header
    app_title: "Test Tizimi",
    register: "Ro'yxatdan o'tish",
    login: "Kirish",
    logout: "Chiqish",

    // Home
    welcome: "Test Tizimiga Xush Kelibsiz",
    join_quiz: "Testga Qo'shilish",
    create_quiz: "Test Yaratish",
    my_quizzes: "Mening Testlarim",

    // Register
    register_title: "Ro'yxatdan O'tish",
    username: "Foydalanuvchi nomi",
    email: "Email",
    password: "Parol",
    role: "Rol",
    student: "O'quvchi",
    admin: "Admin",
    submit: "Yuborish",
    cancel: "Bekor qilish",
    enter_username: "Foydalanuvchi nomini kiriting",
    enter_email: "Emailni kiriting",
    enter_password: "Parolni kiriting",

    // Login
    login_title: "Kirish",

    // Join Quiz
    join_quiz_title: "Testga Qo'shilish",
    quiz_code: "Test Kodi",
    enter_code: "Test kodini kiriting",
    your_name: "Ismingiz",
    enter_name: "Ismingizni kiriting",
    join: "Qo'shilish",

    // Create Quiz
    create_quiz_title: "Yangi Test Yaratish",
    quiz_title: "Test Nomi",
    enter_quiz_title: "Test nomini kiriting",
    quiz_mode: "Test Rejimi",
    quiz_language: "Test Tili",
    mode_synchronized: "Sinxronlashgan (Admin boshqaradi)",
    mode_self_paced_immediate: "O'z tezligida (Javoblar darhol)",
    mode_self_paced_end: "O'z tezligida (Javoblar oxirida)",
    lang_uzbek: "O'zbek tili",
    lang_russian: "Русский язык",
    lang_english: "English",
    add_question: "Savol Qo'shish",
    create: "Yaratish",

    // Question
    question: "Savol",
    question_text: "Savol matni",
    enter_question: "Savolingizni kiriting",
    add_images_videos: "Rasm/Video qo'shish:",
    url: "URL",
    upload: "Yuklash",
    time_limit: "Vaqt chegarasi (soniya)",
    variants: "Variantlar",
    add_variant: "Variant qo'shish",
    correct: "To'g'ri",
    remove_question: "Savolni o'chirish",

    // My Quizzes
    my_quizzes_title: "Mening Testlarim",
    code: "Kod",
    mode: "Rejim",
    language: "Til",
    status: "Holat",
    actions: "Amallar",
    view: "Ko'rish",
    delete: "O'chirish",
    pending: "Kutilmoqda",
    live: "Jonli",
    finished: "Tugagan",

    // Quiz Detail
    quiz_detail: "Test Tafsilotlari",
    participants: "Ishtirokchilar",
    start_quiz: "Testni Boshlash",
    next_question: "Keyingi Savol",
    pause: "To'xtatish",
    resume: "Davom ettirish",
    finish_quiz: "Testni Tugatish",
    back: "Orqaga",

    // Messages
    creating: "Yaratilmoqda...",
    quiz_created: "✅ Test muvaffaqiyatli yaratildi!",
    quiz_deleted: "Test o'chirildi",
    error_occurred: "Xatolik yuz berdi",
    loading: "Yuklanmoqda...",
    no_quizzes: "Hozircha testlar yo'q",
    
    // Additional buttons and actions
    big_screen: "Katta ekran",
    stop_live: "To'xtatish",
    view_results: "Natijalarni Ko'rish",
    edit: "Tahrirlash",
    go_live: "Jonli efirga chiqarish",
    leaderboard: "Natijalar Jadvali",
    score: "Ball",
    rank: "O'rin",
    correct_answer: "To'g'ri javob",
    your_answer: "Sizning javobingiz",
    time_up: "Vaqt tugadi!",
    waiting: "Kutilmoqda...",
    question_number: "Savol",
    variant: "Variant",
    add_media: "Yana Media Qo'shish",
  },

  ru: {
    // Header
    app_title: "Система Тестирования",
    register: "Регистрация",
    login: "Войти",
    logout: "Выйти",

    // Home
    welcome: "Добро пожаловать в Систему Тестирования",
    join_quiz: "Присоединиться к Тесту",
    create_quiz: "Создать Тест",
    my_quizzes: "Мои Тесты",

    // Register
    register_title: "Регистрация",
    username: "Имя пользователя",
    email: "Email",
    password: "Пароль",
    role: "Роль",
    student: "Студент",
    admin: "Администратор",
    submit: "Отправить",
    cancel: "Отмена",
    enter_username: "Введите имя пользователя",
    enter_email: "Введите email",
    enter_password: "Введите пароль",

    // Login
    login_title: "Вход",

    // Join Quiz
    join_quiz_title: "Присоединиться к Тесту",
    quiz_code: "Код Теста",
    enter_code: "Введите код теста",
    your_name: "Ваше имя",
    enter_name: "Введите ваше имя",
    join: "Присоединиться",

    // Create Quiz
    create_quiz_title: "Создать Новый Тест",
    quiz_title: "Название Теста",
    enter_quiz_title: "Введите название теста",
    quiz_mode: "Режим Теста",
    quiz_language: "Язык Теста",
    mode_synchronized: "Синхронизированный (управляет админ)",
    mode_self_paced_immediate: "Свободный темп (ответы сразу)",
    mode_self_paced_end: "Свободный темп (ответы в конце)",
    lang_uzbek: "O'zbek tili",
    lang_russian: "Русский язык",
    lang_english: "English",
    add_question: "Добавить Вопрос",
    create: "Создать",

    // Question
    question: "Вопрос",
    question_text: "Текст вопроса",
    enter_question: "Введите ваш вопрос",
    add_images_videos: "Добавить изображения/видео:",
    url: "URL",
    upload: "Загрузить",
    time_limit: "Ограничение времени (секунды)",
    variants: "Варианты",
    add_variant: "Добавить вариант",
    correct: "Правильный",
    remove_question: "Удалить вопрос",

    // My Quizzes
    my_quizzes_title: "Мои Тесты",
    code: "Код",
    mode: "Режим",
    language: "Язык",
    status: "Статус",
    actions: "Действия",
    view: "Просмотр",
    delete: "Удалить",
    pending: "Ожидание",
    live: "В эфире",
    finished: "Завершен",

    // Quiz Detail
    quiz_detail: "Детали Теста",
    participants: "Участники",
    start_quiz: "Начать Тест",
    next_question: "Следующий Вопрос",
    pause: "Пауза",
    resume: "Продолжить",
    finish_quiz: "Завершить Тест",
    back: "Назад",

    // Messages
    creating: "Создание...",
    quiz_created: "✅ Тест успешно создан!",
    quiz_deleted: "Тест удален",
    error_occurred: "Произошла ошибка",
    loading: "Загрузка...",
    no_quizzes: "Пока нет тестов",
    
    // Additional buttons and actions
    big_screen: "Большой экран",
    stop_live: "Остановить",
    view_results: "Просмотр Результатов",
    edit: "Редактировать",
    go_live: "В эфир",
    leaderboard: "Таблица Лидеров",
    score: "Баллы",
    rank: "Место",
    correct_answer: "Правильный ответ",
    your_answer: "Ваш ответ",
    time_up: "Время истекло!",
    waiting: "Ожидание...",
    question_number: "Вопрос",
    variant: "Вариант",
    add_media: "Добавить Еще Медиа",
  },

  en: {
    // Header
    app_title: "Quiz System",
    register: "Register",
    login: "Login",
    logout: "Logout",

    // Home
    welcome: "Welcome to Quiz System",
    join_quiz: "Join Quiz",
    create_quiz: "Create Quiz",
    my_quizzes: "My Quizzes",

    // Register
    register_title: "Register",
    username: "Username",
    email: "Email",
    password: "Password",
    role: "Role",
    student: "Student",
    admin: "Admin",
    submit: "Submit",
    cancel: "Cancel",
    enter_username: "Enter your username",
    enter_email: "Enter your email",
    enter_password: "Enter your password",

    // Login
    login_title: "Login",

    // Join Quiz
    join_quiz_title: "Join Quiz",
    quiz_code: "Quiz Code",
    enter_code: "Enter quiz code",
    your_name: "Your Name",
    enter_name: "Enter your name",
    join: "Join",

    // Create Quiz
    create_quiz_title: "Create New Quiz",
    quiz_title: "Quiz Title",
    enter_quiz_title: "Enter quiz title",
    quiz_mode: "Quiz Mode",
    quiz_language: "Quiz Language",
    mode_synchronized: "Synchronized (Admin controlled)",
    mode_self_paced_immediate: "Self-paced (Immediate answers)",
    mode_self_paced_end: "Self-paced (Answers at end)",
    lang_uzbek: "O'zbek tili",
    lang_russian: "Русский язык",
    lang_english: "English",
    add_question: "Add Question",
    create: "Create",

    // Question
    question: "Question",
    question_text: "Question text",
    enter_question: "Enter your question",
    add_images_videos: "Add Images/Videos:",
    url: "URL",
    upload: "Upload",
    time_limit: "Time Limit (seconds)",
    variants: "Variants",
    add_variant: "Add Variant",
    correct: "Correct",
    remove_question: "Remove Question",

    // My Quizzes
    my_quizzes_title: "My Quizzes",
    code: "Code",
    mode: "Mode",
    language: "Language",
    status: "Status",
    actions: "Actions",
    view: "View",
    delete: "Delete",
    pending: "Pending",
    live: "Live",
    finished: "Finished",

    // Quiz Detail
    quiz_detail: "Quiz Details",
    participants: "Participants",
    start_quiz: "Start Quiz",
    next_question: "Next Question",
    pause: "Pause",
    resume: "Resume",
    finish_quiz: "Finish Quiz",
    back: "Back",

    // Messages
    creating: "Creating...",
    quiz_created: "✅ Quiz created successfully!",
    quiz_deleted: "Quiz deleted",
    error_occurred: "An error occurred",
    loading: "Loading...",
    no_quizzes: "No quizzes yet",
    
    // Additional buttons and actions
    big_screen: "Big Screen",
    stop_live: "Stop Live",
    view_results: "View Results",
    edit: "Edit",
    go_live: "Go Live",
    leaderboard: "Leaderboard",
    score: "Score",
    rank: "Rank",
    correct_answer: "Correct Answer",
    your_answer: "Your Answer",
    time_up: "Time's up!",
    waiting: "Waiting...",
    question_number: "Question",
    variant: "Variant",
    add_media: "Add Another Media",
  },
};

// Current language
let currentLanguage = localStorage.getItem("siteLanguage") || "uz";

// Change site language
function changeSiteLanguage() {
  const selectedLang = document.getElementById("siteLanguage").value;
  currentLanguage = selectedLang;
  localStorage.setItem("siteLanguage", selectedLang);
  updatePageLanguage();
}

// Update all text on the page
function updatePageLanguage() {
  const elements = document.querySelectorAll("[data-i18n]");
  elements.forEach((element) => {
    const key = element.getAttribute("data-i18n");
    if (translations[currentLanguage] && translations[currentLanguage][key]) {
      if (element.tagName === "INPUT" && element.placeholder !== undefined) {
        element.placeholder = translations[currentLanguage][key];
      } else {
        element.textContent = translations[currentLanguage][key];
      }
    }
  });

  // Update select options
  const selectElements = document.querySelectorAll("select[data-i18n-options]");
  selectElements.forEach((select) => {
    const options = select.querySelectorAll("option[data-i18n]");
    options.forEach((option) => {
      const key = option.getAttribute("data-i18n");
      if (translations[currentLanguage] && translations[currentLanguage][key]) {
        option.textContent = translations[currentLanguage][key];
      }
    });
  });
}

// Get translation
function t(key) {
  return (
    (translations[currentLanguage] && translations[currentLanguage][key]) || key
  );
}

// Initialize language on page load
document.addEventListener("DOMContentLoaded", () => {
  const siteLanguageSelect = document.getElementById("siteLanguage");
  if (siteLanguageSelect) {
    siteLanguageSelect.value = currentLanguage;
    updatePageLanguage();
  }
});
